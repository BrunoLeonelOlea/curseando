<div class="course-detail-container">
    <button class="btn-back" [routerLink]="['/']">Volver a Cursos</button>

    <div *ngIf="loading" class="loading-spinner">
        <p>Cargando curso...</p>
    </div>

    <div *ngIf="error && !loading" class="alert alert-error" role="alert">
        <p>{{ errorMessage || 'Error al cargar el curso' }}</p>
    </div>

    <div *ngIf="successMessage && !loading" class="alert alert-success">
        <p><strong>âœ“ Ã‰xito:</strong> {{ successMessage }}</p>
    </div>

    <div *ngIf="course && !loading" class="course-content">
        <div class="course-hero">
            <div class="difficulty-badge" [ngClass]="'difficulty-' + course.difficulty.toLowerCase()">
                {{course.difficulty}}
            </div>
            <h1>{{course.title}}</h1>
            <div class="course-meta">
                <div class="meta-item">
                    <span class="meta-icon">ğŸ‘¤</span>
                    <span class="meta-text">{{course.instructor}}</span>
                </div>
                <div class="meta-item">
                    <span class="meta-icon">â±ï¸</span>
                    <span class="meta-text">{{course.duration}}</span>
                </div>
            </div>
        </div>

        <div class="course-description">
            <p>{{course.description}}</p>
        </div>

        <div class="course-stats">
            <div class="stat-card stat-card-primary">
                <div class="stat-icon">ğŸ“Š</div>
                <div class="stat-content">
                    <span class="stat-label">Cupos disponibles</span>
                    <span class="stat-value">{{course.capacity - course.enrolledCount}}</span>
                    <span class="stat-sublabel">de {{course.capacity}} totales</span>
                </div>
            </div>
            <div class="stat-card stat-card-secondary">
                <div class="stat-icon">ğŸ‘¥</div>
                <div class="stat-content">
                    <span class="stat-label">Estudiantes inscriptos</span>
                    <span class="stat-value">{{course.enrolledCount}}</span>
                    <span class="stat-sublabel">participando activamente</span>
                </div>
            </div>
        </div>

        <app-enroll-form 
            [courseId]="course.id" 
            [availableSpots]="course.capacity - course.enrolledCount"
            (enrollmentSuccess)="onEnrollSuccess()"
            (enrollmentError)="onEnrollError($event)">
        </app-enroll-form>
    </div>

</div>
